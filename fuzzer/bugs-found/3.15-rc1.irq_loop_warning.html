<html>
<head>
<title>
WARNING: at arch/x86/kernel/cpu/perf_event_intel.c:1373 perfevents: irq loop stuck!
</title>
</head>

<body>

<center>
<h1>
WARNING: at arch/x86/kernel/cpu/perf_event_intel.c:1373 perfevents: irq loop stuck!
</h1>
</center>

<h3>Severity</h3>
Just a warning, although it does cause a long pause while
the interrupt is stuck on.

<h3>Found by</h3>
perf_fuzzer

<h3>First Seen</h3>
3.15-rc1

<h3>Most recently Seen</h3>
4.8-rc1

<h3>Reproducible</h3>
yes

<h3>Found On</h3>
Haswell

<h3>Linux-kernel Mailing List Report</h3>
13 May 2014 -- 
<a href="https://lkml.org/lkml/2014/5/13/906">perfevents: irq loop stuck!</a>

<h3>Analysis</h3>

There are two problems.  The first was the 63-bit overflow issue
detailed below which makes triggering the problem easier.
The other is the overflow interrupt getting stuck on when
the fixed-counter-0 sample_period is 2.<br><br>

<h3>Kernel Splat</h3>

<ol>
<li>
<pre>
*** perf_fuzzer 0.30-pre *** by Vince Weaver

        Linux version 4.0.0+ x86_64
        Processor: Intel 6/60/3

        Seeding random number generator with 1429913766
        /proc/sys/kernel/perf_event_max_sample_rate currently: 100000/s
        /proc/sys/kernel/perf_event_paranoid currently: 0
        Logging perf_event_open() failures: no
        Running fsync after every syscall: no
        To reproduce, try: ./perf_fuzzer -s 30000 -r 1429913766

Pid=26448, sleeping 1s
==================================================
Fuzzing the following syscalls:
        mmap perf_event_open close read write ioctl fork prctl poll 
*NOT* Fuzzing the following syscalls:
        
Also attempting the following:
        signal-handler-on-overflow busy-instruction-loop accessing-perf-proc-and-sys-files trashing-the-mmap-page 
*NOT* attempting the following:
        
==================================================
Iteration 10000
        Open attempts: 127761  Successful: 907  Currently open: 595
                EPERM : 13
                ENOENT : 638
                E2BIG : 12148
                EBADF : 7160
                UNKNOWN 16 : 1
                EINVAL : 106556
                ENOSPC : 9
                EOPNOTSUPP : 329
                Type (Hardware 216/16984)(software 320/18429)(tracepoint 68/18304)(Cache 57/16130)(cpu 172/18053)(breakpoint 23/18313)(power 0/2258)(intel_bts 51/2332)(uncore_imc 0/2316)(#9 0/18)(#10 0/18)(#11 0/12)(#12 0/24)(#13 0/18)(#14 0/14)(>14 0/14538)
        Close attempts: 312  Successful: 312
        Read attempts: 894  Successful: 786
        Write attempts: 871  Successful: 0
        Ioctl attempts: 914  Successful: 411
        Mmap attempts: 907  Successful: 102
        Prctl attempts: 900  Successful: 900
        Fork attempts: 446  Successful: 446
        Poll attempts: 883  Successful: 865
        Access attempts: 939  Successful: 466
        Trash mmap attempts: 900  Successful: 900
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
[ 8224.179407] ------------[ cut here ]------------
[ 8224.184368] WARNING: CPU: 0 PID: 0 at arch/x86/kernel/cpu/perf_event_intel.c:1602 intel_pmu_handle_irq+0x2bc/0x450()
[ 8224.195686] perfevents: irq loop stuck!
[ 8224.199835] Modules linked in: fuse x86_pkg_temp_thermal intel_powerclamp intel_rapl iosf_mbi coretemp kvm crct10dif_pclmul snd_hda_codec_hdmi crc32_pclmul ghash_clmulni_intel snd_hda_codec_realtek aesni_intel snd_hda_codec_generic aes_x86_64 i915 snd_hda_intel snd_hda_controller snd_hda_codec snd_hda_core snd_hwdep lrw snd_pcm gf128mul iTCO_wdt iTCO_vendor_support drm_kms_helper glue_helper snd_timer ppdev evdev drm ablk_helper snd cryptd mei_me soundcore xhci_pci tpm_tis psmouse xhci_hcd mei serio_raw lpc_ich tpm mfd_core parport_pc pcspkr parport wmi i2c_algo_bit battery i2c_i801 button processor video sg sr_mod sd_mod cdrom ahci libahci libata ehci_pci ehci_hcd e1000e usbcore ptp crc32c_intel fan scsi_mod pps_core usb_common thermal thermal_sys
[ 8224.273188] CPU: 0 PID: 0 Comm: swapper/0 Tainted: G        W       4.0.0+ #136
[ 8224.281012] Hardware name: LENOVO 10AM000AUS/SHARKBAY, BIOS FBKT72AUS 01/26/2014
[ 8224.288988]  ffffffff81a093a8 ffff88011ea05b50 ffffffff816d5639 0000000000000000
[ 8224.297058]  ffff88011ea05ba0 ffff88011ea05b90 ffffffff81072e4a ffff880119b87090
[ 8224.306453]  0000000000000064 ffff88011ea0bd80 ffff8800c38c7800 0000000000000040
[ 8224.315894] Call Trace:
[ 8224.319886]  <NMI>  [<ffffffff816d5639>] dump_stack+0x45/0x57
[ 8224.327439]  [<ffffffff81072e4a>] warn_slowpath_common+0x8a/0xc0
[ 8224.335238]  [<ffffffff81072ec6>] warn_slowpath_fmt+0x46/0x50
[ 8224.342812]  [<ffffffff8103399c>] intel_pmu_handle_irq+0x2bc/0x450
[ 8224.350830]  [<ffffffff81164215>] ? perf_event_task_tick+0x1d5/0x2b0
[ 8224.359025]  [<ffffffff8102a40b>] perf_event_nmi_handler+0x2b/0x50
[ 8224.367069]  [<ffffffff810185c0>] nmi_handle+0xa0/0x150
[ 8224.374067]  [<ffffffff81018525>] ? nmi_handle+0x5/0x150
[ 8224.381169]  [<ffffffff8101886a>] default_do_nmi+0x4a/0x140
[ 8224.388487]  [<ffffffff810189f8>] do_nmi+0x98/0xe0
[ 8224.394886]  [<ffffffff816df8af>] end_repeat_nmi+0x1e/0x2e
[ 8224.402082]  [<ffffffff8105bffa>] ? native_write_msr_safe+0xa/0x10
[ 8224.409958]  [<ffffffff8105bffa>] ? native_write_msr_safe+0xa/0x10
[ 8224.417785]  [<ffffffff8105bffa>] ? native_write_msr_safe+0xa/0x10
[ 8224.425536]  <<EOE>>  <IRQ>  [<ffffffff8103356e>] intel_pmu_enable_event+0x20e/0x230
[ 8224.435001]  [<ffffffff8102b721>] x86_pmu_start+0x81/0x120
[ 8224.442007]  [<ffffffff8102bf25>] x86_pmu_enable+0x295/0x310
[ 8224.449150]  [<ffffffff811621aa>] perf_pmu_enable+0x2a/0x30
[ 8224.456173]  [<ffffffff81029fe8>] x86_pmu_commit_txn+0x78/0xa0
[ 8224.456173]  [<ffffffff81029fe8>] x86_pmu_commit_txn+0x78/0xa0
[ 8224.463561]  [<ffffffff81427f6b>] ? debug_object_activate+0x14b/0x1e0
[ 8224.471591]  [<ffffffff810bdde9>] ? __lock_acquire.isra.31+0x3b9/0x1000
[ 8224.479715]  [<ffffffff81427f6b>] ? debug_object_activate+0x14b/0x1e0
[ 8224.487676]  [<ffffffff810bcba4>] ? __lock_is_held+0x54/0x80
[ 8224.494794]  [<ffffffff81162d50>] ? event_sched_in.isra.85+0x190/0x330
[ 8224.502894]  [<ffffffff811630a8>] group_sched_in+0x1b8/0x1e0
[ 8224.510082]  [<ffffffff8101df1a>] ? native_sched_clock+0x2a/0x90
[ 8224.517646]  [<ffffffff811637bc>] __perf_event_enable+0x25c/0x2a0
[ 8224.525297]  [<ffffffff810f3e69>] ? tick_nohz_irq_exit+0x29/0x30
[ 8224.532776]  [<ffffffff8115ef30>] ? cpu_clock_event_start+0x40/0x40
[ 8224.540595]  [<ffffffff8115ef80>] remote_function+0x50/0x60
[ 8224.547668]  [<ffffffff810f8cd1>] flush_smp_call_function_queue+0x81/0x180
[ 8224.556126]  [<ffffffff810f9763>] generic_smp_call_function_single_interrupt+0x13/0x60
[ 8224.565749]  [<ffffffff8104b5c8>] smp_trace_call_function_single_interrupt+0x38/0xc0
[ 8224.575132]  [<ffffffff816de9be>] trace_call_function_single_interrupt+0x6e/0x80
[ 8224.584168]  <EOI>  [<ffffffff8156e8b5>] ? cpuidle_enter_state+0x65/0x160
[ 8224.592646]  [<ffffffff8156e8a1>] ? cpuidle_enter_state+0x51/0x160
[ 8224.600408]  [<ffffffff8156e9e7>] cpuidle_enter+0x17/0x20
[ 8224.607285]  [<ffffffff810b6e39>] cpu_startup_entry+0x399/0x440
[ 8224.614712]  [<ffffffff816c9ddb>] rest_init+0xbb/0xd0
[ 8224.621283]  [<ffffffff81d46f74>] start_kernel+0x44e/0x45b
[ 8224.628212]  [<ffffffff81d46120>] ? early_idt_handlers+0x120/0x120
[ 8224.635980]  [<ffffffff81d464d7>] x86_64_start_reservations+0x2a/0x2c
[ 8224.643999]  [<ffffffff81d46614>] x86_64_start_kernel+0x13b/0x14a
[ 8224.651691] ---[ end trace 5679ca0875946dba ]---
[ 8224.657764] 
[ 8224.660447] CPU#0: ctrl:       0000000000000000
[ 8224.666448] CPU#0: status:     0000000000000000
[ 8224.672414] CPU#0: overflow:   0000000000000000
[ 8224.678373] CPU#0: fixed:      00000000000000b9
[ 8224.684338] CPU#0: pebs:       0000000000000000
[ 8224.690322] CPU#0: debugctl:   0000000000000000
[ 8224.696253] CPU#0: active:     0000000300000000
[ 8224.702232] CPU#0:   gen-PMC0 ctrl:  00000000108001c2
[ 8224.708823] CPU#0:   gen-PMC0 count: 0000000000000001
[ 8224.715371] CPU#0:   gen-PMC0 left:  0000ffffffffffff
[ 8224.721914] CPU#0:   gen-PMC1 ctrl:  00000000001382d0
[ 8224.728402] CPU#0:   gen-PMC1 count: 0000000000ff3792
[ 8224.734849] CPU#0:   gen-PMC1 left:  0000ffffff012119
[ 8224.741271] CPU#0:   gen-PMC2 ctrl:  00000003ff96764b
[ 8224.747600] CPU#0:   gen-PMC2 count: 0000000000000001
[ 8224.753884] CPU#0:   gen-PMC2 left:  0000ffffffffffff
[ 8224.760100] CPU#0:   gen-PMC3 ctrl:  0000000000131acd
[ 8224.766320] CPU#0:   gen-PMC3 count: 000000000000288a
[ 8224.772585] CPU#0:   gen-PMC3 left:  0000ffffffffffff
[ 8224.778769] CPU#0: fixed-PMC0 count: 0000fffffffffffe
[ 8224.784973] CPU#0: fixed-PMC1 count: 0000fffda1877268
[ 8224.791196] CPU#0: fixed-PMC2 count: 0000000000f222eb
[ 8224.797450] perf_event_intel: clearing PMU state on CPU#0
[ 8224.804063] INFO: NMI handler (perf_event_nmi_handler) took too long to run: 624.630 msecs
[ 8224.813789] perf interrupt took too long (4880480 > 2500), lowering kernel.perf_event_max_sample_rate to 50000
[ 8224.825400] perf interrupt took too long (4842512 > 5000), lowering kernel.perf_event_max_sample_rate to 25000
[ 8225.007411] perf interrupt took too long (4804688 > 10000), lowering kernel.perf_event_max_sample_rate to 12500
[ 8225.244832] perf interrupt took too long (4767159 > 20000), lowering kernel.perf_event_max_sample_rate to 6250
[ 8225.295535] perf interrupt took too long (4729923 > 38461), lowering kernel.perf_event_max_sample_rate to 3250
[ 8225.747314] perf interrupt took too long (4692980 > 71428), lowering kernel.perf_event_max_sample_rate to 1750
</pre>

<li>With PeterZ's 63-bit limit patch applied.
<pre>
*** perf_fuzzer 0.29-pre *** by Vince Weaver

        Linux version 3.15.0-rc5+ x86_64
        Processor: Intel 6/60/3

        Seeding random number generator with 1400341222
        /proc/sys/kernel/perf_event_max_sample_rate currently: 12500/s
        /proc/sys/kernel/perf_event_paranoid currently: 1
        Logging perf_event_open() failures: no
        Running fsync after every syscall: no
        To reproduce, try: ./perf_fuzzer -t OCIRMQWPFpAi -s 50000 -r 1400341222

Pid=9255, sleeping 1s
==================================================
Fuzzing the following syscalls:
        mmap perf_event_open close read write ioctl fork prctl poll 
*NOT* Fuzzing the following syscalls:
        
Also attempting the following:
        busy-instruction-loop accessing-perf-proc-and-sys-files trashing-the-mmap-page 
*NOT* attempting the following:
        signal-handler-on-overflow 
==================================================
Iteration 10000
        Open attempts: 204136  Successful: 889
                EPERM : 23
                ENOENT : 1782
                E2BIG : 23607
                EBADF : 10276
                EACCES : 983
                EINVAL : 165653
                ENOSPC : 304
                EOPNOTSUPP : 619
                Type (Hardware 192/26697)(software 411/30206)(tracepoint 75/29889)(Cache 34/25527)(cpu 151/30007)(breakpoint 26/29908)(uncore_imc 0/4158)(power 0/4179)(#8 0/104)(#9 0/30)(#10 0/24)(#11 0/21)(#12 0/28)(#13 0/24)(#14 0/27)(>14 0/23307)
        Close attempts: 855  Successful: 855
        Read attempts: 932  Successful: 838
        Write attempts: 845  Successful: 0
        Ioctl attempts: 875  Successful: 397
        Mmap attempts: 889  Successful: 377
        Prctl attempts: 891  Successful: 891
        Fork attempts: 463  Successful: 463
        Poll attempts: 871  Successful: 0
        Access attempts: 907  Successful: 461
        Trash mmap attempts: 894  Successful: 894
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
Iteration 20000
        Open attempts: 198724  Successful: 946
                EPERM : 20
                ENOENT : 1780
                E2BIG : 22966
                EBADF : 9207
                EACCES : 973
                EINVAL : 161838
                ENOSPC : 329
                EOPNOTSUPP : 665
                Type (Hardware 211/26247)(software 395/29165)(tracepoint 85/28975)(Cache 62/25198)(cpu 178/29118)(breakpoint 15/29305)(uncore_imc 0/4178)(power 0/4140)(#8 0/96)(#9 0/25)(#10 0/27)(#11 0/23)(#12 0/25)(#13 0/22)(#14 0/32)(>14 0/22148)
        Close attempts: 910  Successful: 910
        Read attempts: 918  Successful: 827
        Write attempts: 908  Successful: 0
        Ioctl attempts: 907  Successful: 404
        Mmap attempts: 946  Successful: 369
        Prctl attempts: 866  Successful: 866
        Fork attempts: 448  Successful: 448
        Poll attempts: 884  Successful: 1
        Access attempts: 916  Successful: 485
        Trash mmap attempts: 936  Successful: 936
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
Iteration 30000
        Open attempts: 195961  Successful: 886
                EPERM : 22
                ENOENT : 1790
                E2BIG : 22597
                EBADF : 9114
                EACCES : 994
                EINVAL : 159620
                ENOSPC : 327
                EOPNOTSUPP : 611
                Type (Hardware 212/25756)(software 347/29144)(tracepoint 91/28665)(Cache 45/24682)(cpu 172/28491)(breakpoint 19/28515)(uncore_imc 0/4074)(power 0/4151)(#8 0/89)(#9 0/35)(#10 0/29)(#11 0/15)(#12 0/24)(#13 0/26)(#14 0/32)(>14 0/22233)
        Close attempts: 933  Successful: 933
        Read attempts: 900  Successful: 806
        Write attempts: 902  Successful: 0
        Ioctl attempts: 925  Successful: 416
        Mmap attempts: 886  Successful: 371
        Prctl attempts: 884  Successful: 884
        Fork attempts: 455  Successful: 455
        Poll attempts: 912  Successful: 2
        Access attempts: 952  Successful: 474
        Trash mmap attempts: 904  Successful: 904
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
Iteration 40000
        Open attempts: 188894  Successful: 919
                EPERM : 18
                ENOENT : 1756
                E2BIG : 22159
                EBADF : 8667
                EACCES : 944
                EINVAL : 153542
                ENOSPC : 307
                EOPNOTSUPP : 582
                Type (Hardware 215/25176)(software 395/27947)(tracepoint 64/27458)(Cache 52/23674)(cpu 173/27533)(breakpoint 20/27463)(uncore_imc 0/3960)(power 0/4112)(#8 0/72)(#9 0/37)(#10 0/24)(#11 0/24)(#12 0/30)(#13 0/28)(#14 0/30)(>14 0/21326)
        Close attempts: 862  Successful: 862
        Read attempts: 928  Successful: 818
        Write attempts: 925  Successful: 0
        Ioctl attempts: 898  Successful: 397
        Mmap attempts: 919  Successful: 367
        Prctl attempts: 903  Successful: 903
        Fork attempts: 454  Successful: 454
        Poll attempts: 936  Successful: 0
        Access attempts: 875  Successful: 444
        Trash mmap attempts: 899  Successful: 899
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
[69213.252805] ------------[ cut here ]------------
[69213.260637] WARNING: CPU: 4 PID: 11343 at arch/x86/kernel/cpu/perf_event_intel.c:1373 intel_pmu_handle_irq+0x2a4/0x3c0()
[69213.276788] perfevents: irq loop stuck!
[69213.285424] Modules linked in: fuse x86_pkg_temp_thermal intel_powerclamp coretemp snd_hda_codec_realtek kvm snd_hda_codec_hdmi snd_hda_codec_generic crc32_pclmul snd_hda_intel ghash_clmulni_intel aesni_intel snd_hda_controller aes_x86_64 snd_hda_codec i915 snd_hwdep iTCO_wdt lrw snd_pcm gf128mul drm_kms_helper glue_helper snd_timer iTCO_vendor_support ppdev evdev drm wmi battery parport_pc mei_me tpm_tis parport ablk_helper button i2c_algo_bit processor video i2c_i801 psmouse i2c_core snd pcspkr serio_raw cryptd soundcore tpm lpc_ich mfd_core mei sd_mod crc_t10dif sr_mod crct10dif_generic cdrom ehci_pci ehci_hcd xhci_hcd ahci e1000e libahci libata crct10dif_pclmul crct10dif_common ptp usbcore crc32c_intel scsi_mod pps_core usb_common fan thermal thermal_sys
[69213.378556] CPU: 4 PID: 11343 Comm: perf_fuzzer Tainted: G      D       3.15.0-rc5+ #108
[69213.391205] Hardware name: LENOVO 10AM000AUS/SHARKBAY, BIOS FBKT72AUS 01/26/2014
[69213.403033]  0000000000000009 ffff88011eb06cb0 ffffffff8164a8f0 ffff88011eb06cf8
[69213.414865]  ffff88011eb06ce8 ffffffff810646ad 0000000000000064 ffff88011eb0cbe0
[69213.426497]  ffff880036ec8000 0000000000000040 ffff88011eb0cde0 ffff88011eb06d48
[69213.438024] Call Trace:
[69213.444133]  <NMI>  [<ffffffff8164a8f0>] dump_stack+0x45/0x56
[69213.453792]  [<ffffffff810646ad>] warn_slowpath_common+0x7d/0xa0
[69213.463691]  [<ffffffff8106471c>] warn_slowpath_fmt+0x4c/0x50
[69213.473231]  [<ffffffff8102efe4>] intel_pmu_handle_irq+0x2a4/0x3c0
[69213.483198]  [<ffffffff8165440b>] perf_event_nmi_handler+0x2b/0x50
[69213.493162]  [<ffffffff81653bd8>] nmi_handle.isra.5+0xa8/0x150
[69213.502796]  [<ffffffff81653b35>] ? nmi_handle.isra.5+0x5/0x150
[69213.512514]  [<ffffffff81653d58>] do_nmi+0xd8/0x340
[69213.521079]  [<ffffffff81653201>] end_repeat_nmi+0x1e/0x2e
[69213.530362]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[69213.540425]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[69213.550387]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[69213.560288]  <<EOE>>  <IRQ>  [<ffffffff8102ebcd>] intel_pmu_enable_event+0x21d/0x240
[69213.571791]  [<ffffffff81027bfa>] x86_pmu_start+0x7a/0x100
[69213.580833]  [<ffffffff810283f5>] x86_pmu_enable+0x295/0x310
[69213.590010]  [<ffffffff8113538f>] perf_pmu_enable+0x2f/0x40
[69213.599039]  [<ffffffff81136c04>] perf_cpu_hrtimer_handler+0xf4/0x200
[69213.609033]  [<ffffffff8108b286>] __run_hrtimer+0x86/0x1e0
[69213.617999]  [<ffffffff81136b10>] ? perf_event_context_sched_in+0xd0/0xd0
[69213.628315]  [<ffffffff8108bdd7>] hrtimer_interrupt+0xf7/0x240
[69213.637648]  [<ffffffff81044677>] local_apic_timer_interrupt+0x37/0x60
[69213.647709]  [<ffffffff8165da16>] smp_trace_apic_timer_interrupt+0x46/0xb9
[69213.658188]  [<ffffffff8165c41d>] trace_apic_timer_interrupt+0x6d/0x80
[69213.668302]  <EOI> 
[69213.670400] ---[ end trace 4d7b668c63a63e5c ]---
[69213.681834] 
[69213.686561] CPU#4: ctrl:       0000000000000000
[69213.694352] CPU#4: status:     0000000000000000
[69213.701979] CPU#4: overflow:   0000000000000000
[69213.709599] CPU#4: fixed:      00000000000000b8
[69213.717172] CPU#4: pebs:       0000000000000000
[69213.724596] CPU#4: active:     0000000300000000
[69213.731939] CPU#4:   gen-PMC0 ctrl:  000000000013412e
[69213.739877] CPU#4:   gen-PMC0 count: 000000000000002c
[69213.747820] CPU#4:   gen-PMC0 left:  0000ffffffffffd7
[69213.755657] CPU#4:   gen-PMC1 ctrl:  0000000000138b40
[69213.763461] CPU#4:   gen-PMC1 count: 00000000000086b3
[69213.771152] CPU#4:   gen-PMC1 left:  0000ffffffff81c9
[69213.778742] CPU#4:   gen-PMC2 ctrl:  000000000013024e
[69213.786271] CPU#4:   gen-PMC2 count: 0000000000000001
[69213.793784] CPU#4:   gen-PMC2 left:  0000ffffffffffff
[69213.801227] CPU#4:   gen-PMC3 ctrl:  0000000000134f2e
[69213.808720] CPU#4:   gen-PMC3 count: 00000000000009f9
[69213.816192] CPU#4:   gen-PMC3 left:  0000fffffffff6de
[69213.823620] CPU#4: fixed-PMC0 count: 0000fffffffffffe
[69213.831035] CPU#4: fixed-PMC1 count: 0000ffffea2a90b2
[69213.838477] CPU#4: fixed-PMC2 count: 00000000051c5865
[69213.845792] perf_event_intel: clearing PMU state on CPU#4
[69213.853505] INFO: NMI handler (perf_event_nmi_handler) took too long to run: 600.823 msecs
[69213.864201] perf interrupt took too long (4696473 > 20000), lowering kernel.perf_event_max_sample_rate to 6250
</pre>

<li>Reproducibe case with 0.29-pre
<pre>
./perf_fuzzer -t OCIRMQWPFpAi -s 50000 -r 1400007525
</pre>
<li>
<pre>
*** perf_fuzzer 0.28 *** by Vince Weaver

        Linux version 3.15.0-rc1+ x86_64
        Processor: Intel 6/60/3

        Seeding random number generator with 1399378358
        /proc/sys/kernel/perf_event_max_sample_rate currently: 6250/s
        /proc/sys/kernel/perf_event_paranoid currently: 1
        Logging perf_event_open() failures: no
        Running fsync after every syscall: no
        To reproduce, try: ./perf_fuzzer -t OCIRMQWPFpAi -s 50000 -r 1399378358

Pid=4598, sleeping 1s
==================================================
Fuzzing the following syscalls:
        mmap perf_event_open close read write ioctl fork prctl poll 
*NOT* Fuzzing the following syscalls:
        
Also attempting the following:
        busy-instruction-loop accessing-perf-proc-and-sys-files trashing-the-mma
p-page 
*NOT* attempting the following:
        signal-handler-on-overflow 
==================================================
[76576.580505] ------------[ cut here ]------------
[76576.585446] WARNING: CPU: 4 PID: 4598 at arch/x86/kernel/cpu/perf_event_intel.c:1373 intel_pmu_handle_irq+0x2a4/0x3c0()
[76576.597028] perfevents: irq loop stuck!
[76576.601156] Modules linked in: fuse x86_pkg_temp_thermal intel_powerclamp coretemp kvm snd_hda_codec_hdmi crct10dif_pclmul crc32_pclmul ghash_clmulni_intel snd_hda_codec_realtek snd_hda_codec_generic i915 aesni_intel snd_hda_intel snd_hda_controller snd_hda_codec snd_hwdep snd_pcm snd_seq snd_timer snd_seq_device tpm_tis ppdev snd aes_x86_64 parport_pc tpm evdev mei_me drm_kms_helper iTCO_wdt drm soundcore lrw gf128mul glue_helper iTCO_vendor_support wmi ablk_helper i2c_algo_bit button battery processor mei psmouse parport pcspkr serio_raw cryptd i2c_i801 video i2c_core lpc_ich mfd_core sd_mod sr_mod crc_t10dif cdrom crct10dif_common ahci libahci ehci_pci e1000e libata xhci_hcd ehci_hcd ptp crc32c_intel usbcore scsi_mod pps_core usb_common fan thermal thermal_sys
[76576.675785] CPU: 4 PID: 4598 Comm: perf_fuzzer Not tainted 3.15.0-rc1+ #104
[76576.683257] Hardware name: LENOVO 10AM000AUS/SHARKBAY, BIOS FBKT72AUS 01/26/2014
[76576.691229]  0000000000000009 ffff88011eb06cb0 ffffffff81649ca0 ffff88011eb06cf8
[76576.699279]  ffff88011eb06ce8 ffffffff810646ad 0000000000000064 ffff88011eb0cbe0
[76576.707343]  ffff8800c9c1d800 0000000000000040 ffff88011eb0cde0 ffff88011eb06d48
[76576.715389] Call Trace:
[76576.718009]  <NMI>  [<ffffffff81649ca0>] dump_stack+0x45/0x56
[76576.724230]  [<ffffffff810646ad>] warn_slowpath_common+0x7d/0xa0
[76576.730682]  [<ffffffff8106471c>] warn_slowpath_fmt+0x4c/0x50
[76576.736888]  [<ffffffff8102ef94>] intel_pmu_handle_irq+0x2a4/0x3c0
[76576.743541]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[76576.750209]  [<ffffffff8165378b>] perf_event_nmi_handler+0x2b/0x50
[76576.756867]  [<ffffffff81652f58>] nmi_handle.isra.5+0xa8/0x150
[76576.763149]  [<ffffffff81652eb5>] ? nmi_handle.isra.5+0x5/0x150
[76576.769543]  [<ffffffff816530d8>] do_nmi+0xd8/0x340
[76576.774799]  [<ffffffff81652581>] end_repeat_nmi+0x1e/0x2e
[76576.780706]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[76576.787384]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[76576.794028]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[76576.800659]  <<EOE>>  [<ffffffff8102eb7d>] intel_pmu_enable_event+0x21d/0x240
[76576.808304]  [<ffffffff81027baa>] x86_pmu_start+0x7a/0x100
[76576.814200]  [<ffffffff810283a5>] x86_pmu_enable+0x295/0x310
[76576.820254]  [<ffffffff8113528f>] perf_pmu_enable+0x2f/0x40
[76576.826225]  [<ffffffff8102644a>] x86_pmu_commit_txn+0x7a/0xa0
[76576.832496]  [<ffffffff8108b98a>] ? __hrtimer_start_range_ns+0x19a/0x3a0
[76576.839738]  [<ffffffff810b0cad>] ? __lock_acquire.isra.29+0x3bd/0xb90
[76576.846734]  [<ffffffff8101a21e>] ? arch_install_hw_breakpoint+0xce/0x100
[76576.854001]  [<ffffffff81135fe0>] ? event_sched_in.isra.76+0x150/0x1e0
[76576.861030]  [<ffffffff81136230>] group_sched_in+0x1c0/0x1e0
[76576.867117]  [<ffffffff81136725>] __perf_event_enable+0x255/0x260
[76576.873717]  [<ffffffff811318f0>] remote_function+0x40/0x50
[76576.879698]  [<ffffffff810dda26>] generic_exec_single+0x126/0x170
[76576.886210]  [<ffffffff811318b0>] ? task_clock_event_add+0x40/0x40
[76576.892894]  [<ffffffff810ddad7>] smp_call_function_single+0x67/0xa0
[76576.899684]  [<ffffffff811307f9>] task_function_call+0x49/0x60
[76576.905957]  [<ffffffff811364d0>] ? perf_event_sched_in+0x90/0x90
[76576.913747]  [<ffffffff811308a0>] perf_event_enable+0x90/0xf0
[76576.921171]  [<ffffffff81130810>] ? task_function_call+0x60/0x60
[76576.928855]  [<ffffffff8113097f>] perf_event_for_each_child+0x3f/0xb0
[76576.937001]  [<ffffffff811372af>] perf_event_task_enable+0x4f/0x80
[76576.944851]  [<ffffffff8107be85>] SyS_prctl+0x255/0x4b0
[76576.951663]  [<ffffffff813becc6>] ? lockdep_sys_exit_thunk+0x35/0x67
[76576.959707]  [<ffffffff8165a96d>] system_call_fastpath+0x1a/0x1f
[76576.967357] ---[ end trace 2b5a3d32e8d767a6 ]---
[76576.973524] 
[76576.976338] CPU#4: ctrl:       0000000000000000
[76576.982445] CPU#4: status:     0000000000000000
[76576.988522] CPU#4: overflow:   0000000000000000
[76576.994597] CPU#4: fixed:      00000000000000b9
[76577.000694] CPU#4: pebs:       0000000000000000
[76577.006774] CPU#4: active:     0000000300000007
[76577.012842] CPU#4:   gen-PMC0 ctrl:  000000002450123c
[76577.019480] CPU#4:   gen-PMC0 count: 0000000000000001
[76577.026151] CPU#4:   gen-PMC0 left:  0000ffffffffffff
[76577.032825] CPU#4:   gen-PMC1 ctrl:  0000000010c101c2
[76577.039477] CPU#4:   gen-PMC1 count: 00000000039f37f8
[76577.046121] CPU#4:   gen-PMC1 left:  0000fffffc618a8f
[76577.052722] CPU#4:   gen-PMC2 ctrl:  0000000000540800
[76577.059354] CPU#4:   gen-PMC2 count: 0000000000000001
[76577.065924] CPU#4:   gen-PMC2 left:  0000ffffffffffff
[76577.072474] CPU#4:   gen-PMC3 ctrl:  000000000010412e
[76577.079016] CPU#4:   gen-PMC3 count: 0000000000000001
[76577.091968] CPU#4: fixed-PMC0 count: 0000fffffffffffe
[76577.098320] CPU#4: fixed-PMC1 count: 0000fffcb8c081d9
[76577.104602] CPU#4: fixed-PMC2 count: 000000000288ac63
[76577.110844] perf_event_intel: clearing PMU state on CPU#4
[76577.117485] INFO: NMI handler (perf_event_nmi_handler) took too long to run: 536.956 msecs
[76577.127177] perf interrupt took too long (4196671 > 38461), lowering kernel.perf_event_max_sample_rate to 3250
[76577.138804] perf_event_intel: clearing PMU state on CPU#4
[76577.145453] perf interrupt took too long (4215989 > 71428), lowering kernel.perf_event_max_sample_rate to 1750
[76577.619546] perf interrupt took too long (4117985 > 500000), lowering kernel.perf_event_max_sample_rate to 250

</pre>

<li>
<pre>
*** perf_fuzzer 0.28 *** by Vince Weaver

        Linux version 3.15.0-rc1+ x86_64
        Processor: Intel 6/60/3

        Seeding random number generator with 1399077851
        /proc/sys/kernel/perf_event_max_sample_rate currently: 12500/s
        /proc/sys/kernel/perf_event_paranoid currently: 1
        Logging perf_event_open() failures: no
        Running fsync after every syscall: no
        To reproduce, try: ./perf_fuzzer -t OCIRMQWPFpAi -s 50000 -r 1399077851

Pid=4743, sleeping 1s
==================================================
Fuzzing the following syscalls:
        mmap perf_event_open close read write ioctl fork prctl poll 
*NOT* Fuzzing the following syscalls:
        
Also attempting the following:
        busy-instruction-loop accessing-perf-proc-and-sys-files trashing-the-mmap-page 
*NOT* attempting the following:
        signal-handler-on-overflow 
==================================================
Iteration 10000
        Open attempts: 353239  Successful: 915
                EPERM : 17
                ENOENT : 942
                E2BIG : 41017
                EBADF : 6289
                EACCES : 272
                EINVAL : 303113
                ENOSPC : 19
                EOPNOTSUPP : 655
        Close attempts: 876  Successful: 876
        Read attempts: 881  Successful: 763
        Write attempts: 844  Successful: 0
        Ioctl attempts: 854  Successful: 388
        Mmap attempts: 915  Successful: 289
        Prctl attempts: 884  Successful: 884
        Fork attempts: 445  Successful: 445
        Poll attempts: 900  Successful: 7
        Access attempts: 929  Successful: 466
        Trash mmap attempts: 843  Successful: 843
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
Iteration 20000
        Open attempts: 336925  Successful: 913
                EPERM : 19
                ENOENT : 923
                E2BIG : 39023
                EBADF : 5522
                EACCES : 247
                EINVAL : 289437
                ENOSPC : 144
                EOPNOTSUPP : 697
        Close attempts: 901  Successful: 901
        Read attempts: 952  Successful: 819
        Write attempts: 929  Successful: 0
        Ioctl attempts: 857  Successful: 379
        Mmap attempts: 913  Successful: 262
        Prctl attempts: 875  Successful: 875
        Fork attempts: 460  Successful: 460
        Poll attempts: 885  Successful: 8
        Access attempts: 927  Successful: 482
        Trash mmap attempts: 889  Successful: 889
        Overflows: 0
        SIGIOs due to RT signal queue full: 0
[17190.202941] ------------[ cut here ]------------
[17190.207906] WARNING: CPU: 2 PID: 4743 at arch/x86/kernel/cpu/perf_event_intel.c:1373 intel_pmu_handle_irq+0x2a4/0x3c0()
[17190.219460] perfevents: irq loop stuck!
[17190.223579] Modules linked in: fuse x86_pkg_temp_thermal intel_powerclamp coretemp kvm snd_hda_codec_realtek snd_hda_codec_hdmi snd_hda_codec_generic snd_hda_intel snd_hda_controller crct10dif_pclmul snd_hda_codec crc32_pclmul snd_hwdep ghash_clmulni_intel snd_pcm aesni_intel aes_x86_64 lrw snd_seq snd_timer snd_seq_device gf128mul snd i915 glue_helper evdev soundcore drm_kms_helper mei_me iTCO_wdt iTCO_vendor_support lpc_ich battery drm ppdev psmouse serio_raw ablk_helper cryptd wmi parport_pc mei parport tpm_tis i2c_algo_bit button processor video tpm i2c_i801 i2c_core mfd_core pcspkr sd_mod sr_mod crc_t10dif cdrom crct10dif_common ehci_pci ahci xhci_hcd ehci_hcd libahci e1000e libata ptp crc32c_intel usbcore scsi_mod pps_core usb_common thermal fan thermal_sys
[17190.298419] CPU: 2 PID: 4743 Comm: perf_fuzzer Not tainted 3.15.0-rc1+ #102
[17190.305926] Hardware name: LENOVO 10AM000AUS/SHARKBAY, BIOS FBKT72AUS 01/26/2014
[17190.313906]  0000000000000009 ffff88011ea86cb0 ffffffff81649c80 ffff88011ea86cf8
[17190.322034]  ffff88011ea86ce8 ffffffff810646ad 0000000000000064 ffff88011ea8cbe0
[17190.330134]  ffff8800cf7a7800 0000000000000040 ffff88011ea8cde0 ffff88011ea86d48
[17190.338122] Call Trace:
[17190.340775]  <NMI>  [<ffffffff81649c80>] dump_stack+0x45/0x56
[17190.347023]  [<ffffffff810646ad>] warn_slowpath_common+0x7d/0xa0
[17190.353472]  [<ffffffff8106471c>] warn_slowpath_fmt+0x4c/0x50
[17190.359677]  [<ffffffff8102ef94>] intel_pmu_handle_irq+0x2a4/0x3c0
[17190.366315]  [<ffffffff8105034d>] ? native_write_msr_safe+0xd/0x10
[17190.372954]  [<ffffffff8165378b>] perf_event_nmi_handler+0x2b/0x50
[17190.379629]  [<ffffffff81652f58>] nmi_handle.isra.5+0xa8/0x150
[17190.385879]  [<ffffffff81652eb5>] ? nmi_handle.isra.5+0x5/0x150
[17190.392287]  [<ffffffff816530d8>] do_nmi+0xd8/0x340
[17190.397572]  [<ffffffff81652581>] end_repeat_nmi+0x1e/0x2e
[17190.403472]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[17190.410098]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[17190.416765]  [<ffffffff8105034a>] ? native_write_msr_safe+0xa/0x10
[17190.423386]  <<EOE>>  [<ffffffff8102eb7d>] intel_pmu_enable_event+0x21d/0x240
[17190.431048]  [<ffffffff81027baa>] x86_pmu_start+0x7a/0x100
[17190.436992]  [<ffffffff810283a5>] x86_pmu_enable+0x295/0x310
[17190.443104]  [<ffffffff8113528f>] perf_pmu_enable+0x2f/0x40
[17190.449087]  [<ffffffff811369a8>] perf_event_context_sched_in+0x88/0xd0
[17190.456165]  [<ffffffff8113713d>] __perf_event_task_sched_in+0x1dd/0x1f0
[17190.463412]  [<ffffffff81090ca8>] finish_task_switch+0xd8/0x120
[17190.469750]  [<ffffffff8164ca90>] __schedule+0x2c0/0x740
[17190.475443]  [<ffffffff8164cf39>] schedule+0x29/0x70
[17190.480772]  [<ffffffff8164c74c>] schedule_hrtimeout_range_clock+0x13c/0x180
[17190.488331]  [<ffffffff8108b1c0>] ? hrtimer_get_res+0x50/0x50
[17190.494491]  [<ffffffff8164c6c9>] ? schedule_hrtimeout_range_clock+0xb9/0x180
[17190.502135]  [<ffffffff8164c7a3>] schedule_hrtimeout_range+0x13/0x20
[17190.508983]  [<ffffffff811c94c9>] poll_schedule_timeout+0x49/0x70
[17190.515535]  [<ffffffff811cab22>] do_sys_poll+0x422/0x540
[17190.521354]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.528737]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.536129]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.543552]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.550915]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.558290]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.565698]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.573075]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.580488]  [<ffffffff811c9650>] ? poll_select_copy_remaining+0x130/0x130
[17190.589071]  [<ffffffff811cad15>] SyS_poll+0x65/0x100
[17190.595690]  [<ffffffff8165a96d>] system_call_fastpath+0x1a/0x1f
[17190.603315] ---[ end trace d44f7960e96a18da ]---
[17190.609412] 
[17190.612182] CPU#2: ctrl:       0000000000000000
[17190.618136] CPU#2: status:     0000000000000000
[17190.624190] CPU#2: overflow:   0000000000000000
[17190.630144] CPU#2: fixed:      00000000000000ba
[17190.636123] CPU#2: pebs:       0000000000000000
[17190.642042] CPU#2: active:     0000000300000001
[17190.648000] CPU#2:   gen-PMC0 ctrl:  00000000004000c4
[17190.654531] CPU#2:   gen-PMC0 count: 0000000000000001
[17190.661059] CPU#2:   gen-PMC0 left:  0000ffffffffffff
[17190.667576] CPU#2:   gen-PMC1 ctrl:  0000000000120280
[17190.674101] CPU#2:   gen-PMC1 count: 0000000000005439
[17190.680623] CPU#2:   gen-PMC1 left:  0000ffffffffaf43
[17190.687127] CPU#2:   gen-PMC2 ctrl:  0000000000114f2e
[17190.693589] CPU#2:   gen-PMC2 count: 0000000000000001
[17190.700039] CPU#2:   gen-PMC2 left:  0000ffffffffffff
[17190.706455] CPU#2:   gen-PMC3 ctrl:  00000000001300c0
[17190.712846] CPU#2:   gen-PMC3 count: 0000000000000001
[17190.719135] CPU#2:   gen-PMC3 left:  0000ffffffffffff
[17190.725357] CPU#2: fixed-PMC0 count: 0000fffffffffffe
[17190.731529] CPU#2: fixed-PMC1 count: 0000ffff192febe2
[17190.737687] CPU#2: fixed-PMC2 count: 0000000000000001
[17190.743840] perf_event_intel: clearing PMU state on CPU#2
</pre>
<li>
<pre>
*** perf_fuzzer 0.28 *** by Vince Weaver

	Linux version 3.15.0-rc1+ x86_64
	Processor: Intel 6/60/3

	Seeding random number generator with 1398101771
	/proc/sys/kernel/perf_event_max_sample_rate currently: 50000/s
	/proc/sys/kernel/perf_event_paranoid currently: 1
	Logging perf_event_open() failures: no
	Running fsync after every syscall: no
	To reproduce, try: ./perf_fuzzer -t OCIRMQWPFpAi -s 50000 -r 1398101771

Pid=11876, sleeping 1s
==================================================
Fuzzing the following syscalls:
	mmap perf_event_open close read write ioctl fork prctl poll 
*NOT* Fuzzing the following syscalls:
	
Also attempting the following:
	busy-instruction-loop accessing-perf-proc-and-sys-files trashing-the-mmap-page 
*NOT* attempting the following:
	signal-handler-on-overflow 
==================================================
Iteration 10000
	Open attempts: 337104  Successful: 905
		EPERM : 14
		ENOENT : 919
		E2BIG : 39172
		EBADF : 5587
		EACCES : 249
		EINVAL : 289434
		ENOSPC : 179
		EOPNOTSUPP : 645
	Close attempts: 874  Successful: 874
	Read attempts: 912  Successful: 781
	Write attempts: 869  Successful: 0
	Ioctl attempts: 875  Successful: 404
	Mmap attempts: 905  Successful: 270
	Prctl attempts: 889  Successful: 889
	Fork attempts: 482  Successful: 482
	Poll attempts: 945  Successful: 13
	Access attempts: 857  Successful: 459
	Trash mmap attempts: 885  Successful: 885
	Overflows: 0
	SIGIOs due to RT signal queue full: 0
Iteration 20000
	Open attempts: 356748  Successful: 929
		EPERM : 16
		ENOENT : 966
		E2BIG : 41129
		EBADF : 5836
		EACCES : 279
		EINVAL : 306820
		ENOSPC : 133
		EOPNOTSUPP : 640
	Close attempts: 913  Successful: 913
	Read attempts: 925  Successful: 793
	Write attempts: 859  Successful: 0
	Ioctl attempts: 908  Successful: 400
	Mmap attempts: 929  Successful: 283
	Prctl attempts: 853  Successful: 853
	Fork attempts: 483  Successful: 483
	Poll attempts: 946  Successful: 19
	Access attempts: 921  Successful: 441
	Trash mmap attempts: 867  Successful: 867
	Overflows: 0
	SIGIOs due to RT signal queue full: 0
Iteration 30000
	Open attempts: 356531  Successful: 924
		EPERM : 14
		ENOENT : 1027
		E2BIG : 41510
		EBADF : 5409
		EACCES : 263
		EINVAL : 306288
		ENOSPC : 397
		EOPNOTSUPP : 699
	Close attempts: 871  Successful: 871
	Read attempts: 886  Successful: 772
	Write attempts: 905  Successful: 0
	Ioctl attempts: 912  Successful: 402
	Mmap attempts: 924  Successful: 231
	Prctl attempts: 958  Successful: 958
	Fork attempts: 449  Successful: 449
	Poll attempts: 880  Successful: 42
	Access attempts: 941  Successful: 478
	Trash mmap attempts: 935  Successful: 935
	Overflows: 0
	SIGIOs due to RT signal queue full: 0
[233086.504483] perf interrupt took too long (5017 > 5000), lowering kernel.perf_event_max_sample_rate to 25000
Iteration 40000
	Open attempts: 323102  Successful: 866
		EPERM : 14
		ENOENT : 883
		E2BIG : 37600
		EBADF : 5049
		EACCES : 232
		EINVAL : 277485
		ENOSPC : 351
		EOPNOTSUPP : 622
	Close attempts: 928  Successful: 928
	Read attempts: 881  Successful: 726
	Write attempts: 891  Successful: 0
	Ioctl attempts: 889  Successful: 404
	Mmap attempts: 866  Successful: 232
	Prctl attempts: 882  Successful: 882
	Fork attempts: 463  Successful: 463
	Poll attempts: 949  Successful: 34
	Access attempts: 939  Successful: 472
	Trash mmap attempts: 907  Successful: 907
	Overflows: 0
	SIGIOs due to RT signal queue full: 0
[233108.540578] ------------[ cut here ]------------
[233108.545658] WARNING: CPU: 3 PID: 11876 at arch/x86/kernel/cpu/perf_event_intel.c:1373 intel_pmu_handle_irq+0x2a4/0x3c0()
[233108.557265] perfevents: irq loop stuck!
[233108.561443] Modules linked in: fuse x86_pkg_temp_thermal intel_powerclamp coretemp snd_hda_codec_realtek snd_hda_codec_hdmi snd_hda_codec_generic kvm snd_hda_intel snd_hda_controller crct10dif_pclmul snd_hda_codec crc32_pclmul ghash_clmulni_intel aesni_intel aes_x86_64 mei_me snd_hwdep snd_pcm lrw gf128mul glue_helper snd_seq i915 mei ablk_helper iTCO_wdt snd_timer cryptd snd_seq_device parport_pc iTCO_vendor_support psmouse wmi i2c_i801 pcspkr snd parport serio_raw tpm_tis drm_kms_helper lpc_ich mfd_core drm evdev tpm i2c_algo_bit button processor video battery i2c_core soundcore sg sd_mod sr_mod crc_t10dif cdrom crct10dif_common hid_generic usbhid hid ahci libahci libata ehci_pci xhci_hcd ehci_hcd e1000e scsi_mod ptp crc32c_intel usbcore pps_core usb_common fan thermal thermal_sys
[233108.636437] CPU: 3 PID: 11876 Comm: perf_fuzzer Not tainted 3.15.0-rc1+ #66
[233108.643855] Hardware name: LENOVO 10AM000AUS/SHARKBAY, BIOS FBKT72AUS 01/26/2014
[233108.651806]  0000000000000009 ffff88011eac6cb0 ffffffff8164f86d ffff88011eac6cf8
[233108.659967]  ffff88011eac6ce8 ffffffff810647cd 0000000000000064 ffff88011eaccbe0
[233108.668082]  ffff880004cbc000 0000000000000040 ffff88011eaccde0 ffff88011eac6d48
[233108.676239] Call Trace:
[233108.678919]  <NMI>  [<ffffffff8164f86d>] dump_stack+0x45/0x56
[233108.685240]  [<ffffffff810647cd>] warn_slowpath_common+0x7d/0xa0
[233108.691783]  [<ffffffff8106483c>] warn_slowpath_fmt+0x4c/0x50
[233108.698068]  [<ffffffff81026e76>] ? x86_pmu_stop+0x76/0xd0
[233108.704058]  [<ffffffff8102ef94>] intel_pmu_handle_irq+0x2a4/0x3c0
[233108.710799]  [<ffffffff81116b8d>] ? trace_buffer_unlock_commit+0x4d/0x60
[233108.718108]  [<ffffffff8112436a>] ? ftrace_event_buffer_commit+0x8a/0xc0
[233108.725417]  [<ffffffff8165940b>] perf_event_nmi_handler+0x2b/0x50
[233108.732169]  [<ffffffff81658bd8>] nmi_handle.isra.5+0xa8/0x150
[233108.738480]  [<ffffffff81658b35>] ? nmi_handle.isra.5+0x5/0x150
[233108.744912]  [<ffffffff81658d58>] do_nmi+0xd8/0x340
[233108.750267]  [<ffffffff81658201>] end_repeat_nmi+0x1e/0x2e
[233108.756248]  [<ffffffff8105046a>] ? native_write_msr_safe+0xa/0x10
[233108.762977]  [<ffffffff8105046a>] ? native_write_msr_safe+0xa/0x10
[233108.769700]  [<ffffffff8105046a>] ? native_write_msr_safe+0xa/0x10
[233108.776456]  <<EOE>>  [<ffffffff8102eb7d>] intel_pmu_enable_event+0x21d/0x240
[233108.784264]  [<ffffffff81027baa>] x86_pmu_start+0x7a/0x100
[233108.790258]  [<ffffffff810283a5>] x86_pmu_enable+0x295/0x310
[233108.796411]  [<ffffffff81135a67>] perf_pmu_enable+0x27/0x30
[233108.802457]  [<ffffffff8102644a>] x86_pmu_commit_txn+0x7a/0xa0
[233108.808831]  [<ffffffff81116b8d>] ? trace_buffer_unlock_commit+0x4d/0x60
[233108.816143]  [<ffffffff8112436a>] ? ftrace_event_buffer_commit+0x8a/0xc0
[233108.823428]  [<ffffffff810b13bd>] ? __lock_acquire.isra.29+0x3bd/0xb90
[233108.830509]  [<ffffffff810af8ca>] ? ftrace_raw_event_lock_acquire+0xba/0x100
[233108.838183]  [<ffffffff81136748>] ? event_sched_in.isra.76+0x148/0x1e0
[233108.845318]  [<ffffffff811369a0>] group_sched_in+0x1c0/0x1e0
[233108.851515]  [<ffffffff81136e95>] __perf_event_enable+0x255/0x260
[233108.858151]  [<ffffffff81132390>] remote_function+0x40/0x50
[233108.864288]  [<ffffffff810de136>] generic_exec_single+0x126/0x170
[233108.870954]  [<ffffffff81132350>] ? task_clock_event_add+0x40/0x40
[233108.877665]  [<ffffffff810de1e7>] smp_call_function_single+0x67/0xa0
[233108.884584]  [<ffffffff811312f4>] task_function_call+0x44/0x50
[233108.890971]  [<ffffffff81136c40>] ? perf_event_sched_in+0x90/0x90
[233108.897650]  [<ffffffff81131390>] perf_event_enable+0x90/0xf0
[233108.903936]  [<ffffffff81131300>] ? task_function_call+0x50/0x50
[233108.910465]  [<ffffffff8113146a>] perf_event_for_each_child+0x3a/0xa0
[233108.917448]  [<ffffffff811379ff>] perf_event_task_enable+0x4f/0x80
[233108.924198]  [<ffffffff8107c015>] SyS_prctl+0x255/0x4b0
[233108.929938]  [<ffffffff81660d44>] tracesys+0xe1/0xe6
[233108.935334] ---[ end trace 01c78b8dcb064f75 ]---
[233108.940414] 
[233108.942136] CPU#3: ctrl:       0000000000000000
[233108.947065] CPU#3: status:     0000000000000000
[233108.953180] CPU#3: overflow:   0000000000000000
[233108.959254] CPU#3: fixed:      00000000000000b0
[233108.965309] CPU#3: pebs:       0000000000000000
[233108.971365] CPU#3: active:     000000020000000f
[233108.977354] CPU#3:   gen-PMC0 ctrl:  0000000000500030
[233108.983917] CPU#3:   gen-PMC0 count: 0000000000000001
[233108.990455] CPU#3:   gen-PMC0 left:  0000ffffffffffff
[233108.996937] CPU#3:   gen-PMC1 ctrl:  000000000052013c
[233109.003417] CPU#3:   gen-PMC1 count: 0000000000001d2e
[233109.009888] CPU#3:   gen-PMC1 left:  0000ffffffffffff
[233109.016324] CPU#3:   gen-PMC2 ctrl:  0000000010c001c2
[233109.022720] CPU#3:   gen-PMC2 count: 000000000f44a8c7
[233109.029064] CPU#3:   gen-PMC2 left:  0000fffff0bf60c5
[233109.035351] CPU#3:   gen-PMC3 ctrl:  0000000000534f2e
[233109.041600] CPU#3:   gen-PMC3 count: 0000fffffffe4164
[233109.047798] CPU#3:   gen-PMC3 left:  000000000001be9c
[233109.054009] CPU#3: fixed-PMC0 count: 0000fffffffffffe
[233109.060247] CPU#3: fixed-PMC1 count: 0000fff95bbfd25f
[233109.066456] CPU#3: fixed-PMC2 count: 0000000000000001
[233109.072660] perf_event_intel: clearing PMU state on CPU#3
</pre>
</ol>


<hr>
<a href="bugs_found.html">Back to perf_fuzzer bugs found</a>

</body>
</html>
